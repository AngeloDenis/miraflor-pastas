<script>
const products = [
{name:"Fideos 500g", price:1500},
{name:"Empanadas 300g", price:1000},
{name:"Empanadas 400g", price:1200},
{name:"Rotiseros", price:1300},
{name:"√Årabes", price:1500},
{name:"Copet√≠n", price:1400},
{name:"Tartas 300g", price:1100},
{name:"Tartas 400g", price:1300},
{name:"Pastelitos 8x8", price:1200},
{name:"Pastelon 10x10", price:1500}
];

let cart = {};

function renderProducts(){
let html="";
products.forEach((p,i)=>{
html+=`
<div class="product">
  <div>
    <b>${p.name}</b><br>$${p.price}
  </div>
  <div>
    <input type="number" min="1" value="1" id="qty${i}" style="width:60px;">
    <button onclick="add('${p.name}',${p.price}, document.getElementById('qty${i}').value)">
      Agregar
    </button>
  </div>
</div>`;
});
document.getElementById("products").innerHTML=html;
}

function add(name,price,qty){
qty = parseInt(qty);
if(!cart[name]) cart[name]={qty:0,price};
cart[name].qty += qty;
renderCart();
}

function renderCart(){
let html="";
let total=0, units=0;
for(let i in cart){
html+=`${cart[i].qty} x ${i} - $${cart[i].qty*cart[i].price}<br>`;
total+=cart[i].qty*cart[i].price;
units+=cart[i].qty;
}
html+=`<hr><b>Total: $${total}</b>`;
document.getElementById("cartItems").innerHTML=html;
cart.units=units;
cart.total=total;
}

function toggleAddress(){
document.getElementById("addressBox").style.display =
document.getElementById("delivery").value==="Env√≠o" ? "block":"none";
}

function sendWhatsApp(){
if(cart.units < 10 && document.getElementById("delivery").value==="Env√≠o"){
alert("El env√≠o es a partir de 10 unidades");
return;
}

let msg="üßæ *Nuevo pedido*%0A";
msg+="Nombre: "+name.value+"%0A";
msg+="Tel: "+phone.value+"%0A%0A";
msg+="Entrega: "+delivery.value+"%0A";
if(delivery.value==="Env√≠o") msg+="Direcci√≥n: "+address.value+"%0A%0A";

for(let i in cart){
msg+=`${cart[i].qty} x ${i}%0A`;
}
msg+=`%0ATotal: $${cart.total}`;

window.open(`https://wa.me/5493406519939?text=${msg}`,"_blank");
}

renderProducts();
</script>
